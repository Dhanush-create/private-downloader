/* JavaScript code from the previous answer */
document.getElementById('download-form').addEventListener('submit', async function(event) { event.preventDefault(); const url = document.getElementById('video-url').value; const messageEl = document.getElementById('message'); const loader = document.getElementById('loader'); const downloadLinkContainer = document.getElementById('download-link-container'); messageEl.textContent = ''; downloadLinkContainer.innerHTML = ''; loader.style.display = 'block'; try { const response = await fetch('/download', { method: 'POST', headers: { 'Content-Type': 'application/json', }, body: JSON.stringify({ url: url }), }); const result = await response.json(); loader.style.display = 'none'; if (response.ok && result.success) { messageEl.style.color = '#28a745'; messageEl.textContent = 'Download ready!'; const a = document.createElement('a'); a.href = result.download_url; a.textContent = 'Click here to Download'; a.className = 'download-button'; a.setAttribute('download', ''); downloadLinkContainer.appendChild(a); } else { messageEl.style.color = '#dc3545'; messageEl.textContent = 'Error: ' + (result.error || 'Something went wrong.'); } } catch (error) { loader.style.display = 'none'; messageEl.style.color = '#dc3545'; messageEl.textContent = 'An unexpected error occurred. Check the console.'; console.error('Fetch error:', error); } });